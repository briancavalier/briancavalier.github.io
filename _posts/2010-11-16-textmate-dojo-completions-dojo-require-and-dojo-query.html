---
layout: post
title: ! 'TextMate Dojo completions: dojo.require and dojo.query'
published: true
---
<div>
<p style="margin-top: 0px;">Last week, I started thinking about what features I&rsquo;d want in the&nbsp;<a href="http://blog.briancavalier.com/dojo-autocomplete-for-textmate">TextMate&nbsp;Dojo&nbsp;completion bundle</a> in order to feel good about calling it releasable. I made a list, and started knocking them down. Here are a few that I managed to tackle over the past week:</p>
<ol>
<li style="margin-top: 0px;">It scans&nbsp;<em style="margin-top: 0px;">and executes</em>&nbsp;<code style="font-size: 12px; font-family: LuxiMono, Bitstream Vera Sans Mono, Monaco, Courier New, monospace; color: #1c360c;">dojo.require()</code>s in the current file and adds their symbols to the completion context.</li>
<li>It recognizes when you are typing&nbsp;<em style="margin-top: 0px;">inside</em>&nbsp;a&nbsp;<code style="font-size: 12px; font-family: LuxiMono, Bitstream Vera Sans Mono, Monaco, Courier New, monospace; color: #1c360c;">dojo.require()</code>&nbsp;and completes dojo package names instead of functions and properties.</li>
<li>It recognizes when you are in a&nbsp;<code style="font-size: 12px; font-family: LuxiMono, Bitstream Vera Sans Mono, Monaco, Courier New, monospace; color: #1c360c; margin-top: 0px;">dojo.query</code>&nbsp;chain and completes NodeList functions while you&rsquo;re in the chain.</li>
<li>Because it understands both&nbsp;<code style="font-size: 12px; font-family: LuxiMono, Bitstream Vera Sans Mono, Monaco, Courier New, monospace; color: #1c360c; margin-top: 0px;">dojo.require</code>&nbsp;and&nbsp;<code style="font-size: 12px; font-family: LuxiMono, Bitstream Vera Sans Mono, Monaco, Courier New, monospace; color: #1c360c;">dojo.query</code>, it will complete functions from NodeList mixins, such as&nbsp;<code style="font-size: 12px; font-family: LuxiMono, Bitstream Vera Sans Mono, Monaco, Courier New, monospace; color: #1c360c;">dojo.NodeList-fx</code>, that you&rsquo;ve&nbsp;<code style="font-size: 12px; font-family: LuxiMono, Bitstream Vera Sans Mono, Monaco, Courier New, monospace; color: #1c360c;">dojo.require</code>d in the current file.</li>
</ol>
<h2 style="color: #222222; text-shadow: #dddddd 3px 3px 5px;">How does it do that?</h2>
<p>In a word: Javascript. I&rsquo;ll be posting more about this later, once the first release is ready.</p>
<h2 style="color: #222222; text-shadow: #dddddd 3px 3px 5px;">A note about performance</h2>
<p>Any completion framework has to be fast. I&rsquo;m ruthless when it comes to development tools, and I&rsquo;ll bet you are too. If something slows me down, I stop using it. If the pain outweighs the benefits, it&rsquo;s gone. So, one of my goals is to make sure this bundle is as fast as it can be.</p>
<p>The current performance is very good on my laptop. The completion popup is nearly instantaneous, even with&nbsp;<code style="font-size: 12px; font-family: LuxiMono, Bitstream Vera Sans Mono, Monaco, Courier New, monospace; color: #1c360c; margin-top: 0px;">dojo.require</code>&nbsp;scanning, and hundreds of potential completions. That said, I&rsquo;m using the most recent MacBook Pro rev with 8g RAM and an SSD. I realize that may not be the most common setup, so I will be testing it with other setups to make sure it doesn&rsquo;t suck.</p>
<h2 style="color: #222222; text-shadow: #dddddd 3px 3px 5px;">I can haz it?</h2>
<p>A few folks have asked when they can get the bundle. Since it&rsquo;s a side project, I don&rsquo;t want to give a date. I&rsquo;ll release an initial version when I feel it&rsquo;s at the point that I&rsquo;d actually use it, and I can tell you that it&rsquo;s getting close :)</p>
<p>For now, here are a few more teasers that show the new stuff in action.</p>
</div>
<ol>
<li><img src="/imgs/2010-11-16-textmate-dojo-completions-dojo-require-and-dojo-query/1.png"></li>
<li><img src="/imgs/2010-11-16-textmate-dojo-completions-dojo-require-and-dojo-query/2.png"></li>
<li><img src="/imgs/2010-11-16-textmate-dojo-completions-dojo-require-and-dojo-query/3.png"></li>
<li><img src="/imgs/2010-11-16-textmate-dojo-completions-dojo-require-and-dojo-query/4.png"></li>
<li><img src="/imgs/2010-11-16-textmate-dojo-completions-dojo-require-and-dojo-query/5.png"></li>
<li><img src="/imgs/2010-11-16-textmate-dojo-completions-dojo-require-and-dojo-query/6.png"></li>
<li><img src="/imgs/2010-11-16-textmate-dojo-completions-dojo-require-and-dojo-query/7.png"></li></ol>
